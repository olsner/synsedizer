#!/usr/bin/env -S LC_CTYPE=C sed -rnf
:loop;s/#.*$//g;s/^\s+//;s/\s+$//;/^r (.*)$/{/ 8000$/s/.*/\x00\x00\x1f@/
/ 16000$/s/.*/\x00\x00\>\x80/;/ 44100$/s/.*/\x00\x00\xacD/
s/^/.snd\x00\x00\x00\x1c\xff\xff\xff\xff\x00\x00\x00\x03/
s/$/\x00\x00\x00\x01\x00\x00\x00\x00\x00/p;beat};/^s (.*)$/{s//S\1/g;H;bleep}
/^([abcde]) (.*)$/{s//W\1,1,0,\2,\2/g;H;beat};/^([ABCDE])$/{s/.*/\L&/;G
s/^(.)\n((.*\n)*)W\1,[^\n]*/\2/;s/^.\n//;h};:eat;z;n;bloop;:leep;
g;s/^\n*/\n/;s/\n*$/\n/;s/\n+/\n/g;s/\nAi*\n/\n/;/\nS/!beat;s/\nS[0-9]+/&-/
s/\nW[^,]*,1,[^\n]+/&-\nAi/g;s/\nW[^,]*,0,[^\n]+/&-\nA-/g;s/^/Aiiiii/
/\nAi/{:a;s/(Ai*)(\n.*\n)Ai\n/\1i\2/;ta;}
/\nA-/{:b;s/Ai(i*\n)(.*\n)A-\n/A\1\2/;tb;}
:d;s/9-/8/g;s/8-/7/g;s/7-/6/g;s/6-/5/g;s/5-/4/g;s/4-/3/g;s/3-/2/g;s/2-/1/g
s/1-/0/g;s/([^0-9]|^)0+([0-9])/\1\2/g;s/([^0-9]|^)0-/\10/g;s/0-/-9/g;td
s/\nS0//g;s/(W[^,]*)(,[01])(,[01])(,[0-9]+),0\n/\1\3\2\4\4\n/g
h;s/\n.*$//;s/^Aiiiiiiiiii+$/\x7f/p;s/^Aiiiiiiiii$/f/p;s/^Aiiiiiiii$/L/p
s/^Aiiiiiii$/3/p;s/^Aiiiiii$/\x19/p;s/^Aiiiii$/\x00/p;s/^Aiiii$/\xe7/p
s/^Aiii$/\xcd/p;s/^Aii$/\xb4/p;s/^Ai$/\x9a/p;s/^A$/\x81/p;bleep
